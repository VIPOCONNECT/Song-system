<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¶ ×‘×“×™×§×ª × ×’×Ÿ ×”××•×–×™×§×”</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .test-button:hover {
            background: #45a049;
        }
        .test-results {
            margin-top: 20px;
            text-align: right;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #f9f9f9;
            min-height: 100px;
        }
        .success {
            color: #4CAF50;
        }
        .error {
            color: #f44336;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>×‘×“×™×§×ª × ×’×Ÿ ×”××•×–×™×§×”</h1>
        <p>×œ×—×¥ ×¢×œ ×”×›×¤×ª×•×¨×™× ×œ××˜×” ×›×“×™ ×œ×‘×“×•×§ ××ª ×”×¤×•× ×§×¦×™×•× ×œ×™×•×ª ×©×œ × ×’×Ÿ ×”××•×–×™×§×”.</p>
        
        <div class="test-section">
            <h2>×‘×“×™×§×•×ª ×‘×¡×™×¡×™×•×ª</h2>
            <button class="test-button" onclick="testPlayerInitialization()">×‘×“×™×§×ª ××ª×—×•×œ × ×’×Ÿ</button>
            <button class="test-button" onclick="testPlayPause()">×‘×“×™×§×ª ×”×¤×¢×œ×”/×”×©×”×™×”</button>
            <button class="test-button" onclick="testPlaylistNavigation()">×‘×“×™×§×ª × ×™×•×•×˜ ×‘×¤×œ×™×™×œ×™×¡×˜</button>
        </div>
        
        <div class="test-section">
            <h2>×‘×“×™×§×•×ª ××ª×§×“××•×ª</h2>
            <button class="test-button" onclick="testShuffle()">×‘×“×™×§×ª ×¢×¨×‘×•×‘ ×©×™×¨×™×</button>
            <button class="test-button" onclick="testErrorHandling()">×‘×“×™×§×ª ×˜×™×¤×•×œ ×‘×©×’×™××•×ª</button>
        </div>
        
        <div class="test-section">
            <h2>×ª×•×¦××•×ª ×”×‘×“×™×§×”</h2>
            <div id="testResults" class="test-results">
                ×œ×—×¥ ×¢×œ ×›×¤×ª×•×¨×™ ×”×‘×“×™×§×” ×›×“×™ ×œ×”×ª×—×™×œ...
            </div>
        </div>
        
        <div>
            <button class="test-button" style="background: #2196F3;" onclick="runAllTests()">×”×¨×¥ ××ª ×›×œ ×”×‘×“×™×§×•×ª</button>
        </div>
        
        <div style="margin-top: 30px;">
            <button class="test-button" style="background: #9c27b0;" onclick="openPlayer()">×¤×ª×— ××ª × ×’×Ÿ ×”××•×–×™×§×”</button>
        </div>
    </div>

    <script>
        const testResults = document.getElementById('testResults');
        let testCount = 0;
        let passedTests = 0;
        let player;

        function logTestResult(message, isSuccess) {
            testCount++;
            if (isSuccess) passedTests++;
            
            const resultElement = document.createElement('div');
            resultElement.className = isSuccess ? 'success' : 'error';
            resultElement.textContent = `${testCount}. ${message} - ${isSuccess ? 'âœ… ×”×¦×œ×™×—' : 'âŒ × ×›×©×œ'}`;
            testResults.appendChild(resultElement);
            testResults.scrollTop = testResults.scrollHeight;
        }

        function resetTestResults() {
            testResults.innerHTML = '';
            testCount = 0;
            passedTests = 0;
        }

        function testPlayerInitialization() {
            resetTestResults();
            
            try {
                // ×‘×“×™×§×ª ×˜×¢×™× ×ª API ×™×•×˜×™×•×‘
                if (typeof YT === 'undefined') {
                    throw new Error('YouTube API ×œ× × ×˜×¢×Ÿ');
                }
                logTestResult('YouTube API × ×˜×¢×Ÿ ×‘×”×¦×œ×—×”', true);
                
                // ×‘×“×™×§×ª ×§×™×•× ×¤×•× ×§×¦×™×•×ª × ×“×¨×©×•×ª
                const requiredFunctions = ['onYouTubeIframeAPIReady', 'playVideo', 'pauseVideo', 'nextTrack', 'previousTrack', 'shufflePlaylist'];
                let allFunctionsExist = true;
                
                requiredFunctions.forEach(func => {
                    if (typeof window[func] !== 'function') {
                        logTestResult(`×¤×•× ×§×¦×™×” ${func} ×—×¡×¨×”`, false);
                        allFunctionsExist = false;
                    }
                });
                
                if (allFunctionsExist) {
                    logTestResult('×›×œ ×”×¤×•× ×§×¦×™×•×ª ×”× ×“×¨×©×•×ª ×§×™×™××•×ª', true);
                }
                
                // ×‘×“×™×§×ª ××ª×—×•×œ ×”× ×’×Ÿ
                if (typeof onYouTubeIframeAPIReady === 'function') {
                    onYouTubeIframeAPIReady();
                    logTestResult('×¤×•× ×§×¦×™×™×ª ×”××ª×—×•×œ × ×§×¨××” ×‘×”×¦×œ×—×”', true);
                }
                
                // ×‘×“×™×§×ª ×›×¤×ª×•×¨×™× ×‘×“×£
                const requiredButtons = ['playVideo', 'pauseVideo', 'nextTrack', 'previousTrack'];
                requiredButtons.forEach(btn => {
                    const elements = document.querySelectorAll(`[onclick*="${btn}"]`);
                    if (elements.length === 0) {
                        logTestResult(`×›×¤×ª×•×¨ ${btn} ×—×¡×¨ ×‘×“×£`, false);
                    }
                });
                
            } catch (error) {
                logTestResult(`×©×’×™××” ×‘×‘×“×™×§×ª ××ª×—×•×œ: ${error.message}`, false);
            }
        }

        function testPlayPause() {
            resetTestResults();
            
            try {
                if (typeof playVideo !== 'function' || typeof pauseVideo !== 'function') {
                    throw new Error('×¤×•× ×§×¦×™×•×ª ×”×¤×¢×œ×”/×”×©×”×™×” ×—×¡×¨×•×ª');
                }
                
                // ×‘×“×™×§×ª ×”×¤×¢×œ×ª ×”× ×’×Ÿ
                playVideo();
                logTestResult('×”×¤×¢×œ×ª × ×’×Ÿ - × ×©×œ×—×” ×‘×§×©×ª ×”×¤×¢×œ×”', true);
                
                // ×‘×“×™×§×ª ×”×©×”×™×™×ª ×”× ×’×Ÿ
                setTimeout(() => {
                    pauseVideo();
                    logTestResult('×”×©×”×™×™×ª × ×’×Ÿ - × ×©×œ×—×” ×‘×§×©×ª ×”×©×”×™×™×”', true);
                }, 1000);
                
            } catch (error) {
                logTestResult(`×©×’×™××” ×‘×‘×“×™×§×ª ×”×¤×¢×œ×”/×”×©×”×™×”: ${error.message}`, false);
            }
        }

        function testPlaylistNavigation() {
            resetTestResults();
            
            try {
                if (typeof nextTrack !== 'function' || typeof previousTrack !== 'function') {
                    throw new Error('×¤×•× ×§×¦×™×•×ª × ×™×•×•×˜ ×—×¡×¨×•×ª');
                }
                
                // ×‘×“×™×§×ª ××¢×‘×¨ ×œ×©×™×¨ ×”×‘×
                nextTrack();
                logTestResult('××¢×‘×¨ ×œ×©×™×¨ ×”×‘× - × ×©×œ×—×” ×‘×§×©×ª ××¢×‘×¨', true);
                
                // ×‘×“×™×§×ª ×—×–×¨×” ×œ×©×™×¨ ×”×§×•×“×
                setTimeout(() => {
                    previousTrack();
                    logTestResult('×—×–×¨×” ×œ×©×™×¨ ×”×§×•×“× - × ×©×œ×—×” ×‘×§×©×ª ××¢×‘×¨', true);
                }, 1000);
                
            } catch (error) {
                logTestResult(`×©×’×™××” ×‘×‘×“×™×§×ª × ×™×•×•×˜: ${error.message}`, false);
            }
        }

        function testShuffle() {
            resetTestResults();
            
            try {
                if (typeof shufflePlaylist !== 'function') {
                    throw new Error('×¤×•× ×§×¦×™×™×ª ×¢×¨×‘×•×‘ ×—×¡×¨×”');
                }
                
                // ×‘×“×™×§×ª ×”×¤×¢×œ×ª ×¢×¨×‘×•×‘
                shufflePlaylist();
                logTestResult('×”×¤×¢×œ×ª ×¢×¨×‘×•×‘ - × ×©×œ×—×” ×‘×§×©×ª ×¢×¨×‘×•×‘', true);
                
                // ×‘×“×™×§×ª ×›×™×‘×•×™ ×¢×¨×‘×•×‘
                setTimeout(() => {
                    if (typeof toggleShuffle === 'function') {
                        toggleShuffle();
                        logTestResult('×›×™×‘×•×™ ×¢×¨×‘×•×‘ - × ×©×œ×—×” ×‘×§×©×ª ×›×™×‘×•×™', true);
                    } else {
                        logTestResult('×¤×•× ×§×¦×™×™×ª toggleShuffle ×—×¡×¨×”', false);
                    }
                }, 1000);
                
            } catch (error) {
                logTestResult(`×©×’×™××” ×‘×‘×“×™×§×ª ×¢×¨×‘×•×‘: ${error.message}`, false);
            }
        }

        function testErrorHandling() {
            resetTestResults();
            
            try {
                // ×©××™×¨×ª ×”×¢×¨×š ×”××§×•×¨×™ ×©×œ ×”×¤×•× ×§×¦×™×”
                const originalPlayVideo = window.playVideo;
                
                // ×”×—×œ×¤×ª ×”×¤×•× ×§×¦×™×” ×‘×’×¨×¡×” ×©×ª×–×¨×•×§ ×©×’×™××”
                window.playVideo = function() {
                    throw new Error('×©×’×™××ª ×“××• ×œ×‘×“×™×§×”');
                };
                
                // ×”×¤×¢×œ×ª ×”×¤×•× ×§×¦×™×” ×©×ª×–×¨×•×§ ×©×’×™××”
                try {
                    playVideo();
                    logTestResult('×˜×™×¤×•×œ ×‘×©×’×™××•×ª - × ×›×©×œ (×œ× ×–×•×”×ª×” ×©×’×™××”)', false);
                } catch (e) {
                    logTestResult('×˜×™×¤×•×œ ×‘×©×’×™××•×ª - ×–×•×”×ª×” ×©×’×™××” ×›×¨××•×™', true);
                }
                
                // ×”×—×–×¨×ª ×”×¤×•× ×§×¦×™×” ×”××§×•×¨×™×ª
                window.playVideo = originalPlayVideo;
                
            } catch (error) {
                logTestResult(`×©×’×™××” ×‘×‘×“×™×§×ª ×˜×™×¤×•×œ ×‘×©×’×™××•×ª: ${error.message}`, false);
            }
        }

        function runAllTests() {
            resetTestResults();
            
            const tests = [
                testPlayerInitialization,
                testPlayPause,
                testPlaylistNavigation,
                testShuffle,
                testErrorHandling
            ];
            
            let currentTest = 0;
            
            function runNextTest() {
                if (currentTest < tests.length) {
                    tests[currentTest]();
                    currentTest++;
                    setTimeout(runNextTest, 2000); // ×”××ª× ×” ×©×œ 2 ×©× ×™×•×ª ×‘×™×Ÿ ×‘×“×™×§×” ×œ×‘×“×™×§×”
                } else {
                    const successRate = Math.round((passedTests / testCount) * 100);
                    const summary = document.createElement('div');
                    summary.style.marginTop = '20px';
                    summary.style.fontWeight = 'bold';
                    summary.style.fontSize = '1.2em';
                    summary.textContent = `×¡×™×•× ×‘×“×™×§×•×ª: ${passedTests} ××ª×•×š ${testCount} ×”×¦×œ×™×—×• (${successRate}%)`;
                    testResults.appendChild(summary);
                }
            }
            
            runNextTest();
        }

        function openPlayer() {
            window.open('index.html', '_blank');
        }
    </script>
</body>
</html>
