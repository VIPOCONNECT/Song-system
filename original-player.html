<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¶ × ×’×Ÿ ×©×™×¨×™× ×œ×¨×›×‘ ğŸš—</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: white;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .music-player {
            width: 90%;
            max-width: 600px;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 15px #1db954;
        }

        .video-frame {
            width: 100%;
            height: 300px;
            border-radius: 15px;
            border: 2px solid #1db954;
        }

        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
        }

        .control-btn {
            background: #1db954;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            transition: 0.3s;
        }

        .control-btn:hover {
            background: #17a450;
        }

        .shuffle-btn.active {
            background: #0b6838 !important;
            box-shadow: 0 0 10px #0b6838;
        }

        .playlist-name {
            margin-top: 10px;
            font-size: 1.3em;
            color: #1db954;
        }

        .back-btn {
            background: #ff3333;
            padding: 10px;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 10px;
        }

        .back-btn:hover {
            background: #cc0000;
        }

        /* ××¤×§×˜ ×”×‘×”×•×‘ ×œ×›×¤×ª×•×¨ ×©× ×œ×—×¥ */
        @keyframes flashEffect {
            0% { background-color: #1db954; }
            50% { background-color: #004080; }
            100% { background-color: #1db954; }
        }

        .active-effect {
            animation: flashEffect 0.3s ease-in-out;
        }

    </style>
</head>
<body>

    <div class="music-player">
        <h2>ğŸ¶ × ×’×Ÿ ××•×–×™×§×” ğŸš—</h2>
        <div id="player" class="video-frame"></div>

        <div class="control-buttons">
            <button class="control-btn" onclick="buttonClickEffect(this); previousTrack()">â®</button>
            <button class="control-btn" onclick="buttonClickEffect(this); playVideo()">â–¶</button>
            <button class="control-btn" onclick="buttonClickEffect(this); pauseVideo()">â¸</button>
            <button class="control-btn" onclick="buttonClickEffect(this); nextTrack()">â­</button>
            <button id="shuffleBtn" class="control-btn shuffle-btn" onclick="buttonClickEffect(this); toggleShuffle()">ğŸ”€ ×¢×¨×‘×•×‘</button>
        </div>

        <div class="control-buttons">
            <button class="control-btn" onclick="buttonClickEffect(this); previousPlaylist()">â¬… ×¤×œ×™×™×œ×™×¡×˜ ×§×•×“×</button>
            <button class="control-btn" onclick="buttonClickEffect(this); nextPlaylist()">â¡ ×¤×œ×™×™×œ×™×¡×˜ ×”×‘×</button>
        </div>

        <div class="playlist-name" id="playlistName">ğŸµ ×¤×œ×™×™×œ×™×¡×˜ 1 - ×©×™×¨×™× ×™×©×¨××œ×™× ğŸ‡®ğŸ‡±</div>

        <button class="back-btn" onclick="buttonClickEffect(this); goBack()">ğŸ”™ ×—×–×¨×” ×œ×“×£ ×”×¨××©×™</button>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        let player;
        let currentPlaylistIndex = 0;
        let isShuffle = false;

        const playlists = [
            { name: "ğŸµ ×¤×œ×™×™×œ×™×¡×˜ 1 - ×©×™×¨×™× ×™×©×¨××œ×™× ğŸ‡®ğŸ‡± (×©×™ ×’×‘×¡×•)", id: "PLDJKwqXlb9lMPxPZ0j6wtf3xnvzIVXgw7" },
            { name: "ğŸµ ×¤×œ×™×™×œ×™×¡×˜ 2 - ×©×œ××” ××¨×¦×™ ğŸ¤", id: "PLy-VLzLFflkGbbgRpL_oiUzmtV89yegEm" }
        ];

        function onYouTubeIframeAPIReady() {
            createPlayer();
        }

        function createPlayer() {
            player = new YT.Player('player', {
                height: '300',
                width: '600',
                playerVars: {
                    'autoplay': 1,
                    'controls': 1,
                    'listType': 'playlist',
                    'list': playlists[currentPlaylistIndex].id
                },
                events: {
                    'onReady': () => {
                        updatePlaylistName();
                        if (isShuffle) {
                            shufflePlaylist();
                        } else {
                            player.playVideo();
                        }
                    }
                }
            });
        }

        function updatePlaylistName() {
            document.getElementById('playlistName').textContent = playlists[currentPlaylistIndex].name;
        }

        function playVideo() {
            if (player && player.playVideo) {
                player.playVideo();
            }
        }

        function pauseVideo() {
            if (player && player.pauseVideo) {
                player.pauseVideo();
            }
        }

        function nextTrack() {
            if (player && player.nextVideo) {
                player.nextVideo();
            }
        }

        function previousTrack() {
            if (player && player.previousVideo) {
                player.previousVideo();
            }
        }

        function nextPlaylist() {
            currentPlaylistIndex = (currentPlaylistIndex + 1) % playlists.length;
            reloadPlayer();
        }

        function previousPlaylist() {
            currentPlaylistIndex = (currentPlaylistIndex - 1 + playlists.length) % playlists.length;
            reloadPlayer();
        }

        function reloadPlayer() {
            if (player) {
                player.destroy();
            }
            setTimeout(() => {
                createPlayer();
            }, 500);
        }

        function toggleShuffle() {
            isShuffle = !isShuffle;
            let shuffleBtn = document.getElementById("shuffleBtn");

            if (isShuffle) {
                shuffleBtn.classList.add("active");
                shufflePlaylist();
            } else {
                shuffleBtn.classList.remove("active");
            }
        }

        function shufflePlaylist() {
            if (player && player.getPlaylist) {
                let playlist = player.getPlaylist();
                if (playlist) {
                    let randomIndex = Math.floor(Math.random() * playlist.length);
                    player.playVideoAt(randomIndex);
                }
            }
        }

        function goBack() {
            window.location.href = "index.html";
        }

        function buttonClickEffect(button) {
            button.classList.add("active-effect");
            setTimeout(() => {
                button.classList.remove("active-effect");
            }, 300);
            if (navigator.vibrate) {
                navigator.vibrate(50);
            }
        }
    </script>

</body>
</html>
